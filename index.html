<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Racy Chatbot Demo (Stable)</title>
    <style>
      :root {
        --bg: #0f172a;
        --panel: #1e2537;
        --accent: #6366f1;
        --text-primary: #f8fafc;
        --text-secondary: #94a3b8;
        --radius-lg: 1rem;
        --radius-xl: 1.25rem;
        --border-color: #334155;
      }

      body {
        margin: 0;
        background: var(--bg);
        color: var(--text-primary);
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter",
          Roboto, "Helvetica Neue", sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        padding: 1rem;
        font-size: 18px;
      }

      .chat-shell {
        background: var(--panel);
        width: 100%;
        max-width: 720px;
        height: 88vh;
        max-height: 900px;
        border-radius: var(--radius-xl);
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6);
        display: flex;
        flex-direction: column;
        border: 1px solid var(--border-color);
        overflow: hidden;
        position: relative;
      }

      .chat-header {
        padding: 1rem 1.25rem;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        background: rgba(15, 23, 42, 0.6);
        backdrop-filter: blur(6px);
      }
      .bot-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: radial-gradient(
          circle at 30% 30%,
          #818cf8 0%,
          #4f46e5 60%,
          #312e81 100%
        );
        border: 2px solid #fff2;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-size: 0.7rem;
        font-weight: 600;
        line-height: 1;
      }
      .header-text {
        flex: 1;
        min-width: 0;
      }
      .header-title {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      .header-badge {
        font-size: 0.6rem;
        background: rgba(99, 102, 241, 0.15);
        color: var(--accent);
        padding: 0.25rem 0.5rem;
        border-radius: 999px;
        border: 1px solid rgba(99, 102, 241, 0.4);
        line-height: 1.1;
        font-weight: 500;
      }
      .header-desc {
        font-size: 0.7rem;
        line-height: 1.3;
        color: var(--text-secondary);
        margin-top: 0.25rem;
      }

      .chat-log {
        flex: 1;
        overflow-y: auto;
        padding: 1rem 1rem 6rem;
        scroll-behavior: smooth;
      }

      .bubble-row {
        display: flex;
        margin-bottom: 1rem;
        width: 100%;
      }
      .bubble-row.bot {
        justify-content: flex-start;
      }

      .bubble {
        max-width: 80%;
        border-radius: var(--radius-lg);
        padding: 0.9rem 1rem 0.95rem;
        line-height: 1.45;
        font-size: 1rem;
        position: relative;
        white-space: pre-wrap;
        word-wrap: break-word;
      }
      .bot .bubble {
        background: #1e293b;
        color: var(--text-primary);
        border: 1px solid #47556966;
        border-bottom-left-radius: 0.4rem;
      }

      .img-card {
        border-radius: 0.6rem;
        overflow: hidden;
        border: 1px solid #47556966;
        background: #0f172a;
        margin-top: 0.5rem;
      }
      .img-card img {
        display: block;
        width: 100%;
        height: auto;
        object-fit: cover;
        background: #000;
      }
      .img-card-caption {
        font-size: 0.7rem;
        color: var(--text-secondary);
        padding: 0.5rem 0.75rem 0.75rem;
        line-height: 1.3;
        background: #0f172a;
      }

      .chat-input-wrap {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        padding: 0.75rem 1rem 1rem;
        background: linear-gradient(
          to top,
          rgba(15, 23, 42, 1) 0%,
          rgba(15, 23, 42, 0) 80%
        );
        pointer-events: none;
      }
      .chat-input-inner {
        background: #1e2537;
        border: 1px solid var(--border-color);
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        position: relative;
        pointer-events: auto;
      }
      .chat-textbox {
        background: transparent;
        border: 0;
        outline: none;
        flex: 1;
        font-size: 1rem;
        color: var(--text-primary);
        padding: 0.95rem 0.9rem;
        font-family: inherit;
        resize: none;
        max-height: 4.5rem;
      }
      .chat-textbox:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .send-btn {
        background: var(--accent);
        border: 0;
        outline: none;
        cursor: pointer;
        color: #fff;
        font-size: 0.95rem;
        font-weight: 600;
        border-radius: 0.6rem;
        padding: 0.6rem 0.9rem;
        margin-right: 0.5rem;
        transition: opacity 0.12s;
      }
      .send-btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }
    </style>
  </head>
  <body>
    <div class="chat-shell">
      <div class="chat-header">
        <div class="bot-avatar">R</div>
        <div class="header-text">
          <div class="header-title">
            Racy
            <span class="header-badge">AI assistant</span>
          </div>
          <div class="header-desc">
            An AI assistant that helps you critically evaluate online content.
          </div>
        </div>
      </div>

      <div id="chatLog" class="chat-log"></div>

      <div class="chat-input-wrap">
        <form id="chatForm" class="chat-input-inner">
          <textarea
            id="chatInput"
            class="chat-textbox"
            rows="1"
            placeholder="Click Next to continue"
            disabled
          ></textarea>
          <button id="sendBtn" class="send-btn" type="submit">Next</button>
        </form>
      </div>
    </div>

    <script>
      const chatLogEl = document.getElementById("chatLog");
      const chatFormEl = document.getElementById("chatForm");
      const chatInputEl = document.getElementById("chatInput");
      const sendBtnEl = document.getElementById("sendBtn");

      // Í≥µÌÜµ: Î©îÏãúÏßÄ Ï∂îÍ∞Ä Ìï®Ïàò
      function appendMessage(sender, text, options = {}) {
        const row = document.createElement("div");
        row.className = `bubble-row ${sender}`;

        const bubble = document.createElement("div");
        bubble.className = "bubble";

        if (text) {
          const p = document.createElement("div");
          if (options.html) {
            p.innerHTML = text;
          } else {
            p.textContent = text;
          }
          bubble.appendChild(p);
        }

        if (options.image || options.imageCaption) {
          const card = document.createElement("div");
          card.className = "img-card";

          if (options.image) {
            const img = document.createElement("img");
            img.src = options.image;
            img.alt = "reference image";
            card.appendChild(img);
          }

          if (options.imageCaption) {
            const cap = document.createElement("div");
            cap.className = "img-card-caption";
            cap.textContent = options.imageCaption;
            card.appendChild(cap);
          }

          bubble.appendChild(card);
        }

        row.appendChild(bubble);
        chatLogEl.appendChild(row);

        // ÏïÑÎûòÎ°ú ÏûêÎèô Ïä§ÌÅ¨Î°§
        setTimeout(() => {
          chatLogEl.scrollTop = chatLogEl.scrollHeight;
        }, 50);
      }

      // Îã®Í≥ÑÎ≥Ñ Ïä§ÌÅ¨Î¶ΩÌä∏
      const steps = [
        {
          // 1
          text: `Hello, I'm Racy, your AI assistant here to help you critically evaluate online content.`,
        },
        {
          // 2
          text: `Although I draw on extensive training data and advanced language models, I want to be upfront.`,
        },
        {
          // 3
          text: `I can make mistakes; I sometimes misinterpret nuance and overlook important context.`,
          html: true,
        },
        {
          // 4
          text: `If anything I say seems off, confusing, or too good to be true, please bear with me.\n\nPress next button below to continue.`,
        },
        {
          // 5
          text: `Let's start by focusing on the main figure in the image‚ÄîKaty Perry.`,
          image: "https://i.imgur.com/yN8Xli5.png",
        },
        {
          // 3
          text: `At first glance, this image does look convincing. But if you look closely, the face appears overly smooth, without natural skin texture or realistic lighting variation. The symmetry is also unusually perfect‚Äîsomething that often shows up in AI-generated images.`,
          image: "https://i.imgur.com/CWioPs9.png",
        },
        {
          // 3
          text: `Also, look at her hair‚Äîespecially where it touches the background or her shoulders. The hair strands appear clumped. The way the strands meet the background looks unnatural and overly blurred. These blending issues are typical signs of AI generation.`,
          image: "https://i.imgur.com/N3u7nfP.png",
        },
        {
          // 4
          text: `Now, look at the background.
      If you look closely, some cameras are merged with people‚Äôs hands or float unnaturally. Several lenses look distorted or misshaped. And in the background, many faces seem vague, duplicated, or warped‚Äîclassic signs of AI generation.`,
          image: "https://i.imgur.com/qYmNxeQ.png",
        },
        {
          // 5
          text: `Moreover, take a closer look at the caption that was posted with this image: \n\n"Katy Perry stuns at the 2024 Met Gala! üåπ Her floral-themed gown is a breathtaking tribute to nature and elegance. üå∏‚ú®"
          \nEven if the caption feels polished and matches the style you‚Äôd expect from entertainment news, that‚Äôs exactly what makes the deepfake effective‚Äîit can subtly reinforce the illusion and make the image seem more credible.`,
        },
        {
          // 6
          text: `Here is another example.`,
          image: "https://i.imgur.com/VCOdBl6.png",
        },
        {
          // 6
          text: `If you look closely, their bodies seem to be fused together, and the girl in front appears to have no legs, which is a classic AI glitch. These kinds of unnatural merges are hallmark clues in AI-generated imagery. It is always worth pausing to spot inconsistencies before trusting what you see.`,
          image: "https://i.imgur.com/naZQXjD.png",
        },
        {
          // 7
          text: `If you look again, you‚Äôll see the fabric patterns in the circled area are blurred, another hallmark of AI generation. Next time, try zooming in or comparing the image with a known authentic image to spot these texture irregularities.`,
          image: "https://i.imgur.com/sAc4ucy.png",
        },
        {
          // 8
          text: `Let‚Äôs now take a closer look at the caption that was posted with this image : \n\n"These children represent countless young victims of the Gaza conflict - cold, scared, forgotten. We must act."\n\nThis event never occurred. However, when a caption is paired with an image, people tend to believe the information more easily than when reading text alone. In this case, the image makes the caption seem more plausible. \n\nBut remember: this caption is not factual. Always verify such claims with credible news outlets or official reports.`,
        },
        {
          // 9
          text: "Keep these clues in mind when scrolling online. \n\nSometimes, the most believable posts are the ones we need to question the most. Based on everything we went over today, here‚Äôs a checklist of things you should always always keep in mind before trusting what you see online:",
        },

        {
          text: `<span style="font-weight: bold; text-decoration: underline; color: #6366f1;">1) Initial Belief Check</span>\n- Images paired with text feel more convincing‚Äîdon't trust your first gut feeling.\n- Always pause and dig deeper before accepting what you see.`,
          html: true,
        },

        {
          text: `<span style="font-weight: bold; text-decoration: underline; color: #6366f1;">2) Physical Anomalies</span>\n- Look for body parts that merge or overlap unnaturally (e.g., fused torsos).\n- Watch for missing or distorted limbs (e.g., the girl appears to have no legs)`,
          html: true,
        },

        {
          text: `<span style="font-weight: bold; text-decoration: underline; color: #6366f1;">3) Detail & Texture Glitches</span>\n- Zoom in on patterns and textures‚Äîblurred or smeared fabric patterns are telltale AI errors.\n- Check for inconsistent lighting, odd reflections, or overly smooth surfaces.`,
          html: true,
        },

        {
          text: `<span style="font-weight: bold; text-decoration: underline; color: #6366f1;">4) Edge & Blending Issues</span>\n- Inspect hairlines and object edges‚Äîclumped strands or fuzzy boundaries often reveal composites.\n- Background elements (like cameras or faces) may merge unnaturally or look warped.`,
          html: true,
        },

        {
          text: `<span style="font-weight: bold; text-decoration: underline; color: #6366f1;">5) Caption vs. Reality</span>\n- A polished, dramatic caption can boost credibility‚Äîquestion any caption that feels "too perfect."\n- Always verify events or quotes with reputable sources, regardless of how convincing the caption seems.`,
          html: true,
        },

        {
          text: `<span style="font-weight: bold; text-decoration: underline; color: #6366f1;">6) Pro Tip:</span>\n- Whenever something seems "too perfect," "too polished," or "too emotional," zoom in, compare it with known authentic images, and cross-check multiple trusted sources before drawing conclusions.`,
          html: true,
        },
        {
          text: "Please return to the survey tab and complete the remaining questions.",
        },
        {
          text: `Your confirmation code is <span style="font-weight: bold; text-decoration: underline; color: #ef4444;">1398</span>.\nPlease return to the survey and enter this code exactly as shown.`,
          html: true,
        },
      ];

      let currentStep = 0;

      function showStep(index) {
        const step = steps[index];
        appendMessage("bot", step.text, {
          image: step.image,
          imageCaption: step.imageCaption,
          html: step.html,
        });

        if (index === steps.length - 1) {
          sendBtnEl.textContent = "Done";
        }
      }

      // ÌéòÏù¥ÏßÄ Î°úÎìú ÌõÑ 1Î≤à Î©îÏãúÏßÄ ÏûêÎèô ÌëúÏãú
      window.addEventListener("DOMContentLoaded", () => {
        showStep(currentStep);
      });

      // Íµ≥Ïù¥ ÏóîÌÑ∞ ÎàåÎü¨ÎèÑ NextÎûë ÎèôÏùºÌïòÍ≤å
      chatInputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          chatFormEl.requestSubmit();
        }
      });

      // Next Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú Îã§Ïùå Îã®Í≥ÑÎ°ú
      chatFormEl.addEventListener("submit", (e) => {
        e.preventDefault();

        if (currentStep < steps.length - 1) {
          currentStep += 1;
          showStep(currentStep);
        } else {
          appendMessage(
            "bot",
            "You‚Äôve reached the end of this walkthrough. Feel free to scroll back or refresh to review!"
          );
          sendBtnEl.disabled = true;
        }
      });
    </script>
  </body>
</html>
